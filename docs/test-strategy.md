# í…ŒìŠ¤íŠ¸ ì „ëµ ë° TDD ê°€ì´ë“œ

## ğŸ“‹ ëª©ì°¨

1. [í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ](#í…ŒìŠ¤íŠ¸-í”¼ë¼ë¯¸ë“œ)
2. [TDD í”„ë¡œì„¸ìŠ¤](#tdd-í”„ë¡œì„¸ìŠ¤)
3. [í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ](#í…ŒìŠ¤íŠ¸-ì‘ì„±-ê°€ì´ë“œ)
4. [ì»¤ë²„ë¦¬ì§€ ëª©í‘œ](#ì»¤ë²„ë¦¬ì§€-ëª©í‘œ)
5. [CI/CD í†µí•©](#cicd-í†µí•©)

## í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œ

ìš°ë¦¬ í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í…ŒìŠ¤íŠ¸ í”¼ë¼ë¯¸ë“œë¥¼ ë”°ë¦…ë‹ˆë‹¤:

```
         /\
        /E2E\       (5%)  - Playwrightë¥¼ ì‚¬ìš©í•œ E2E í…ŒìŠ¤íŠ¸
       /------\
      /í†µí•© í…ŒìŠ¤íŠ¸\   (20%) - API, ì„œë¹„ìŠ¤ ë ˆì´ì–´ í†µí•© í…ŒìŠ¤íŠ¸
     /------------\
    /  ë‹¨ìœ„ í…ŒìŠ¤íŠ¸  \  (75%) - í•¨ìˆ˜, ì»´í¬ë„ŒíŠ¸ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
   /________________\
```

## TDD í”„ë¡œì„¸ìŠ¤

### 1. Red-Green-Refactor ì‚¬ì´í´

```mermaid
graph LR
    A[Red: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ì‘ì„±] --> B[Green: í…ŒìŠ¤íŠ¸ í†µê³¼í•˜ëŠ” ìµœì†Œ ì½”ë“œ]
    B --> C[Refactor: ì½”ë“œ ê°œì„ ]
    C --> A
```

### 2. TDD ì‹¤ì²œ ì˜ˆì‹œ

```typescript
// 1. RED: ì‹¤íŒ¨í•˜ëŠ” í…ŒìŠ¤íŠ¸ ë¨¼ì € ì‘ì„±
describe('calculateDiscount', () => {
  it('10% í• ì¸ì„ ì ìš©í•´ì•¼ í•¨', () => {
    expect(calculateDiscount(100, 0.1)).toBe(90);
  });
});

// 2. GREEN: í…ŒìŠ¤íŠ¸ë¥¼ í†µê³¼í•˜ëŠ” ìµœì†Œí•œì˜ ì½”ë“œ
function calculateDiscount(price: number, discount: number): number {
  return price - price * discount;
}

// 3. REFACTOR: ì½”ë“œ ê°œì„ 
function calculateDiscount(price: number, discountRate: number): number {
  if (price < 0 || discountRate < 0 || discountRate > 1) {
    throw new Error('Invalid input');
  }
  return price * (1 - discountRate);
}
```

## í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### 1. í…ŒìŠ¤íŠ¸ êµ¬ì¡° (AAA íŒ¨í„´)

```typescript
describe('UserService', () => {
  it('ì‚¬ìš©ìë¥¼ ìƒì„±í•´ì•¼ í•¨', async () => {
    // Arrange (ì¤€ë¹„)
    const userData = { name: 'í™ê¸¸ë™', email: 'hong@example.com' };
    const userService = new UserService();

    // Act (ì‹¤í–‰)
    const user = await userService.createUser(userData);

    // Assert (ê²€ì¦)
    expect(user).toMatchObject(userData);
    expect(user.id).toBeDefined();
  });
});
```

### 2. í…ŒìŠ¤íŠ¸ ëª…ëª… ê·œì¹™

- í•œêµ­ì–´ë¡œ ëª…í™•í•˜ê²Œ ì‘ì„±
- "~í•´ì•¼ í•¨" í˜•íƒœë¡œ ê¸°ëŒ€ ë™ì‘ ëª…ì‹œ
- êµ¬ì²´ì ì¸ ì‹œë‚˜ë¦¬ì˜¤ ì„¤ëª…

```typescript
// âŒ ë‚˜ìœ ì˜ˆ
it('test user creation');

// âœ… ì¢‹ì€ ì˜ˆ
it('ì´ë©”ì¼ì´ ì¤‘ë³µëœ ê²½ìš° ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œì•¼ í•¨');
```

### 3. í…ŒìŠ¤íŠ¸ ê²©ë¦¬

```typescript
describe('OrderService', () => {
  let orderService: OrderService;
  let mockDatabase: MockDatabase;

  beforeEach(() => {
    // ê° í…ŒìŠ¤íŠ¸ë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    mockDatabase = new MockDatabase();
    orderService = new OrderService(mockDatabase);
  });

  afterEach(() => {
    // í…ŒìŠ¤íŠ¸ í›„ ì •ë¦¬
    mockDatabase.clear();
  });
});
```

## ì»¤ë²„ë¦¬ì§€ ëª©í‘œ

### ì „ì²´ ëª©í‘œ

- **Lines**: 80% ì´ìƒ
- **Branches**: 80% ì´ìƒ
- **Functions**: 80% ì´ìƒ
- **Statements**: 80% ì´ìƒ

### íŒŒì¼ë³„ ëª©í‘œ

- **ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§**: 95% ì´ìƒ
- **ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜**: 100%
- **API í´ë¼ì´ì–¸íŠ¸**: 90% ì´ìƒ
- **UI ì»´í¬ë„ŒíŠ¸**: 70% ì´ìƒ

### ì»¤ë²„ë¦¬ì§€ ì œì™¸ ëŒ€ìƒ

- ì„¤ì • íŒŒì¼
- íƒ€ì… ì •ì˜ íŒŒì¼
- ëª©ì—… ë°ì´í„°
- í…ŒìŠ¤íŠ¸ íŒŒì¼

## CI/CD í†µí•©

### 1. Pre-commit ê²€ì‚¬

- ì½”ë“œ í¬ë§·íŒ…
- ë¦°íŠ¸ ê²€ì‚¬
- íƒ€ì… ì²´í¬
- ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

### 2. PR ê²€ì‚¬

- ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
- ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
- ì½”ë“œ í’ˆì§ˆ ê²€ì‚¬
- ë³´ì•ˆ ì·¨ì•½ì  ìŠ¤ìº”

### 3. ë¨¸ì§€ í›„

- ì»¤ë²„ë¦¬ì§€ ë°°ì§€ ì—…ë°ì´íŠ¸
- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- E2E í…ŒìŠ¤íŠ¸

## í…ŒìŠ¤íŠ¸ ë„êµ¬

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

- **Vitest**: ë¹ ë¥¸ ì‹¤í–‰ ì†ë„
- **Testing Library**: ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
- **MSW**: API ëª¨í‚¹

### í†µí•© í…ŒìŠ¤íŠ¸

- **Supertest**: HTTP í…ŒìŠ¤íŠ¸
- **Testcontainers**: DB í†µí•© í…ŒìŠ¤íŠ¸

### E2E í…ŒìŠ¤íŠ¸

- **Playwright**: í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
- **Cypress**: ì»´í¬ë„ŒíŠ¸ E2E

## ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

### 1. í…ŒìŠ¤íŠ¸ ìš°ì„  ê°œë°œ

- ê¸°ëŠ¥ êµ¬í˜„ ì „ í…ŒìŠ¤íŠ¸ ì‘ì„±
- í…ŒìŠ¤íŠ¸ê°€ API ì„¤ê³„ ê°€ì´ë“œ ì—­í• 

### 2. ì‘ì€ ë‹¨ìœ„ë¡œ í…ŒìŠ¤íŠ¸

- í•œ ë²ˆì— í•˜ë‚˜ì˜ ë™ì‘ë§Œ í…ŒìŠ¤íŠ¸
- ë³µì¡í•œ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì—¬ëŸ¬ í…ŒìŠ¤íŠ¸ë¡œ ë¶„ë¦¬

### 3. ëª…í™•í•œ ì‹¤íŒ¨ ë©”ì‹œì§€

```typescript
// ì»¤ìŠ¤í…€ ë§¤ì²˜ ì‚¬ìš©
expect(user.age).toBeGreaterThan(17, 'ì‚¬ìš©ìëŠ” 18ì„¸ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤');
```

### 4. í…ŒìŠ¤íŠ¸ ë°ì´í„° íŒ©í† ë¦¬

```typescript
// í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ìœ í‹¸ë¦¬í‹°
const createTestUser = (overrides = {}) => ({
  id: faker.datatype.uuid(),
  name: faker.name.fullName(),
  email: faker.internet.email(),
  ...overrides,
});
```

## ì§€ì†ì  ê°œì„ 

- ë§¤ì£¼ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ë¦¬ë·°
- ë¶„ê¸°ë³„ í…ŒìŠ¤íŠ¸ ì „ëµ íšŒê³ 
- í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ì‹œê°„ ëª¨ë‹ˆí„°ë§
- í”Œë ˆì´í‚¤ í…ŒìŠ¤íŠ¸ ì œê±°
